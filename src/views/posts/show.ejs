<div class="main posts-show">
  <div class="container">
    <div class="posts-show-item">
      <div class="post-user-name">
        <img
          class="posts-show-item-image"
          src="<%= user.imageName %>"
          data-test="user-image"
        />
        <a href="/users/<%= user.id %>" data-test="user-name"
          ><%= user.name %></a
        >
      </div>
      <p data-test="post-content"><%= post.content %></p>
      <p class="post-time" data-test="post-time">
        <% let date = new Date(post.updatedAt) %> <% let d1 = date.getFullYear()
        + '/' + ('0' + (date.getMonth() + 1)).slice(-2) + '/' +('0' +
        date.getDate()).slice(-2) + ' ' + ('0' + date.getHours()).slice(-2) +
        ':' + ('0' + date.getMinutes()).slice(-2) %> <%= d1 %>
      </p>
      <% if(!hasLiked){ %>
      <form action="/likes/<%= post.id %>" method="POST" data-test="form-like">
        <button type="submit" data-test="submit-like" class="like-btn like">
          <span class="material-icons" data-test="favorite-icon"
            >favorite_border</span
          >
        </button>
      </form>
      <% } else { %>

      <form
        action="/likes/<%= post.id %>?_method=DELETE"
        method="POST"
        data-test="form-like"
      >
        <button type="submit" data-test="submit-like" class="like-btn unlike">
          <span class="material-icons" data-test="favorite-icon">favorite</span>
        </button>
      </form>
      <% } %>

      <span data-test="like-count"><%= likeCount %></span>
      <% if(user.equal(currentUser)) { %>
      <div class="post-menus">
        <a href="/posts/<%= post.id %>/edit" data-test="post-link-edit">Edit</a>
        <form
          action="/posts/<%= post.id %>?_method=DELETE"
          method="POST"
          data-test="form-like-delete"
        >
          <input type="submit" value="Delete" data-test="submit-post-delete" />
        </form>
      </div>
      <% } %>
    </div>
  </div>
</div>
